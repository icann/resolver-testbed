---
- name: (linux) Install generic packages.
  ansible.builtin.apt:
    pkg:
      - tar
      - tree
      - wget
      - vim
      - tmux
      - htop
      - dnsutils
      - ansible
    state: present
    update_cache: yes
  when: network_configuration.system in ['linux']

- name: (Ubuntu) Install generic packages.
  block:
    - ansible.builtin.apt:
        pkg:
          - tar
          - tree
          - wget
          - vim
          - tmux
          - htop
          - dnsutils
          - python-pip
        state: present
        update_cache: yes
    - ansible.builtin.pip:
        name: ansible
  when: network_configuration.system in ['ubuntu']

- name: (FreeBSD) Install generic packages.
  community.general.pkgng:
    name:
      - tar
      - tree
      - wget
      - vim
      - tmux
      - htop
      - ansible
    state: present
  when: network_configuration.system == 'freebsd'

- name: (NetBSD) Install generic packages.
  community.general.pkgin:
    name:
      - tar
      - tree
      - wget
      - vim
      - tmux
      - htop
      - ansible
    state: present
  when: network_configuration.system == 'netbsd'

- name: (CentOS) Install generic packages.
  ansible.builtin.yum:
    name:
      - tar
      - tree
      - wget
      - vim
      - tmux
      - bind-utils
      - ansible
      #- htop Requires EPEL; skip for now
    state: present
  when: network_configuration.system == 'centos'

- name: Unknown system; fail the playbook.
  ansible.builtin.fail:
    msg: "Unknown system! Cannot install packages!"
  when: "network_configuration.system not in ['linux', 'ubuntu', 'freebsd', 'netbsd', 'centos']"
